<% content_for :script do %>
	<style>
	
	.card {
		height: 150px;
		float: left;
		position: relative;
	}
	
	.day {
		 width: 150px;
		 border: 2px solid #666666;
		 background-color: #ccc;
		 margin: 9px 5px -3px;
		 -webkit-border-radius: 10px;
		 -ms-border-radius: 10px;
		 -moz-border-radius: 10px;
		 border-radius: 10px;
		 -webkit-box-shadow: inset 0 0 3px #000;
		 -ms-box-shadow: inset 0 0 3px #000;
		 box-shadow: inset 0 0 3px #000;
		 text-align: center;
		 cursor: pointer;
	}
	
	.day footer {
		 color: #fff;
		 text-shadow: #000 0 1px;
		 box-shadow: 5px;
		 padding: 10px;
		 background: -moz-linear-gradient(left center, rgb(0,0,0), rgb(79,79,79), rgb(21,21,21));
		 background: -webkit-gradient(linear, left top, right top,
		                              color-stop(0, rgb(0,0,0)),
		                              color-stop(0.50, rgb(79,79,79)),
		                              color-stop(1, rgb(21,21,21)));
		 background: -webkit-linear-gradient(left center, rgb(0,0,0), rgb(79,79,79), rgb(21,21,21));
		 background: -ms-linear-gradient(left center, rgb(0,0,0), rgb(79,79,79), rgb(21,21,21));
		 border-top: 1px solid #ddd;
		 -webkit-border-bottom-left-radius: 10px;
		 -moz-border-radius-bottomleft: 10px;
		 -ms-border-radius-bottomleft: 10px;
		 border-bottom-left-radius: 10px;
		 -webkit-border-bottom-right-radius: 10px;
		 -ms-border-bottom-right-radius: 10px;
		 -moz-border-radius-bottomright: 10px;
		 border-bottom-right-radius: 10px;
		 height: 3em;
		 position: absolute;
		 bottom: 0;
		 width: 100%;
	}
	</style>
	
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script>
		$(document).ready(function() {
			$(function() {
			    $( "#days" ).sortable();
			    $( "#days" ).disableSelection();
			  });
			
			//creates a new day column upon click of Add Day button
			$('#addDayButton')
				.click(function() {
					d=document.createElement('div');
					$(d).addClass('card day')
					    .html("<div class='city'>City</div><footer>Hotel</footer>")
						.click(function() {
							$('#dayModal').modal('show');
						})
					    .appendTo($("#days")) 
			})
						
			//brings up the edit day details modal
			$('.day')
				.click(function() {
					$('#cityInputBox').val($(this).children('div.city').html());
					$('#hotelInputBox').val($(this).children('footer').html());
					$('#correspondingItem').val($(this).data('itemnum'));
					
					$('#dayModal').modal('show');
				})
				
			$('#saveDayDetailsButton')
				.click(function() {
					var itemnum = $('#correspondingItem').attr('value');
					$('[data-itemnum=' + itemnum + ']').children('div.city').html($('#cityInputBox').val());												
					$('[data-itemnum=' + itemnum + ']').children('footer').html($('#hotelInputBox').val());												
					$('#dayModal').modal('hide');
					
				})
			//when day details modal is dismissed, reset textbox values in modal and assign values to day card
			$('#dayModal').on('hidden.bs.modal', function () {
				$('#cityInputBox').removeAttr('value');							
				$('#hotelInputBox').removeAttr('value');							
			})
		});
	</script>
<% end %>

<div class="modal fade" id="dayModal" tabindex="-1" role="dialog" aria-labelledby="dayModalLabel", aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<form>
			<div class="modal-body">
				<input type="text" class="form-control input-lg" id="cityInputBox" name="city" placeholder="City">
				</br>
				<input type="text" class="form-control input-lg" id="hotelInputBox" placeholder="Hotel">
				<input type="hidden" id="correspondingItem"></input>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
 			    <button type="button" class="btn btn-primary" id="saveDayDetailsButton">Save changes</button>
			</div>
		</form>
		</div>
	</div>
</div>

<div id="days">
  <div class="card day" data-itemnum='1'>
	<div class="city">Jaipur 1</div>
	<footer>Jaipur Hotel</footer>
  </div>
  <div class="card day" data-itemnum='2'>
	<div class="city">Jaipur 2</div>
	<footer>Jaipur Hotel</footer>
  </div>
  <div class="card day" data-itemnum='3'>
	<div class="city">Bundi</div>
	<footer>Bundi Hotel</footer>
  </div>
  <div class="card day" data-itemnum='4'>
	<div class="city">Bundi 2</div>
	<footer>Bundi Hotel</footer>
  </div>
  <button id="addDayButton">Add Day</button>
</div>
